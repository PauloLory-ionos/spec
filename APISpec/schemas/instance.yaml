Instance:
  type: object
  properties:
    metadata:
      $ref: './resource.yaml#/ResourceMetadata'
    spec:
      type: object
      properties:
        skuRef:
          type: string
          description: Reference to the SKU used for this instance
        skuMandatoryParameters:
          type: array
          items:
            type: object
            properties:
              key:
                type: string
              value:
                type: string
        skuExtentions:
          type: array
          items:
            type: object
            properties:
              key:
                type: string
              value:
                type: string
        placement:
          type: object
          properties:
            strategy:
              type: string
              enum: ['zone']
            zone:
              type: string
 #           antiAffinityGroup:
 #             type: string
          required:
            - zone
        nics:
          type: array
          items:
            $ref: './nic.yaml#/NIC'
        cloudInitData:
          type: object
          properties:
            userData:
              type: string
              description: |
                Cloud-init user data for instance initialization
                Example cloud-init user configuration with SSH key:
                ```yaml
                #cloud-config
                ssh_authorized_keys:
                  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC0g+ZTxC7weoIJLUafOgrm+h...
                ```
            sshKeyExternalRef:
              type: array
              items:
                type: string
              description: |
                Provider-specific references to SSH keys used in cloud-init vendorData.
                These references are used to inject SSH public keys during instance initialization 
                through cloud-init's vendor data configuration.
        dataBlockStorageRef:
          type: array
          items:
            type: string
        osBlockStorageRef:
          type: string
          description: Reference to primary block storage for operating system initialization
    status:
      type: object
      readOnly: true
      properties:
        state:
          type: string
          enum: ['provisioning', 'running', 'terminating']
        placement:
          type: object
          properties:
            strategy:
              type: string
              enum: ['zone', 'auto', 'anti-affinity']
            zone:
              type: string
            antiAffinityGroup:
              type: string
        nics:
          type: array
          items:
            $ref: './nic.yaml#/NIC'
        dataBlockStorageRef:
          type: array
          items:
            type: string
        conditions:
          $ref: "./resource.yaml#/StatusConditions"
