SystemRole:
  type: string
  enum:
    - ADMIN
    - WORKSPACE_ADMIN
    - WORKSPACE_EDITOR
    - WORKSPACE_VIEWER
  description: |
    Predefined system roles that cannot be modified:
    * ADMIN - Full system access, can manage workspaces
    * WORKSPACE_ADMIN - Full access within a workspace
    * WORKSPACE_EDITOR - Can edit all resources in workspace
    * WORKSPACE_VIEWER - Can view all resources in workspace

Role:
  type: object
  properties:
    apiVersion:
      type: string
      description: API version of the resource
      default: v1
      readOnly: true
    kind:
      type: string
      description: Type of the resource
      enum: [ role ]
      readOnly: true
    metadata:
      $ref: './resource.yaml#/GlobalTenantResourceMetadata'
    spec:
      $ref: "#/RoleSpec"
    status:
      $ref: "#/RoleStatus"

RoleSpec:
  type: object
  properties:
    permissions:
      type: array
      items:
        type: string
      description: List of permissions granted by this role
      example: ["compute/instance:read", "network/*:write"]

RoleStatus:
  $ref: "./resource.yaml#/Status"

RoleAssignment:
  type: object
  properties:
    apiVersion:
      type: string
      description: API version of the resource
      default: v1
      readOnly: true
    kind:
      type: string
      description: Type of the resource
      enum: [ role-assignment ]
      readOnly: true
    metadata:
      $ref: './resource.yaml#/GlobalTenantResourceMetadata'
    spec:
      $ref: "#/RoleAssignmentSpec"
    status:
      $ref: "#/RoleAssignmentStatus"

RoleAssignmentSpec:
  type: object
  properties:
    subs:
      type: array
      items:
        type: string
      description: List of subject IDs (from JWT) to whom the roles are assigned
      example: ["user1@example.com", "service-account-1"]
    roles:
      type: array
      items:
        type: string
      description: List of assigned role names
      example: ["project-manager", "workspace-viewer"]
    scopes:
      type: array
      items:
        type: string
      description: List of Scopes to whom the roles are assigned
      example: ["workspaces/develop", "workspaces/production"]

RoleAssignmentStatus:
  $ref: "./resource.yaml#/Status"
